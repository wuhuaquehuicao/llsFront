<nav class="navbar navbar-dark fixed-top bg-primary flex-md-nowrap p-0 shadow">
    <a class="navbar-brand col-sm-3 col-md-2 mr-0" href="#">
        <span class="text-light">TOMA MEDIA</span>
    </a>
    <ul class="nav justify-content-end">
        <li class="nav-item dropdown">
            <a class="nav-link text-light dropdown-toggle" href="#" id="menu-dropdown" role="button" data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false">
                <i class="fa fa-reorder"></i>
            </a>
            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="menu-dropdown">
                <h6 class="dropdown-header">
                    <%= __('language') %>
                </h6>
                <button class="dropdown-item setlang" value="en">English</button>
                <!-- <button class="dropdown-item setlang" value="zh">中文</button> -->

                <h6 class="dropdown-header">
                    <%= __('options') %>
                </h6>
                <a class="dropdown-item" href="/profile">
                    <%= __('Profile') %>
                </a>
                <a class="dropdown-item" href="../api/logout">
                    <%= __('logOut') %>
                </a>
            </div>
        </li>
    </ul>
</nav>

<script>
    $('.setlang').click(function (e) {
        e.preventDefault();
        let $this = $(this);
        let lang = $this.val();
        $.ajax({
            url: `../api/setlang?lan=${lang}`,
            timeout: 30000,
            success: function (data) {
                location.reload()
            },
            error: function (err) {
				alert(err.responseJSON ? err.responseJSON.msg : err.statusText);
			}
        })
    })
</script>